<!-- ...existing code... -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><img src="h.jpg">Print Messages</title>
    <style>
        :root{
            --bg:#0f1724;
            --card:#0b1220;
            --accent:#7c3aed;
            --muted:#94a3b8;
            --glass: rgba(255,255,255,0.04);
            --danger:#ef4444;
            --success:#10b981;
            --radius:12px;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }

        *{box-sizing:border-box}
        body{
            margin:0;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            background:
                radial-gradient(1200px 400px at 10% 10%, rgba(124,58,237,0.12), transparent 10%),
                radial-gradient(900px 300px at 90% 90%, rgba(16,185,129,0.06), transparent 15%),
                var(--bg);
            color:#e6eef8;
            padding:32px;
        }

        .container{
            width:100%;
            max-width:820px;
            background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border-radius:var(--radius);
            padding:28px;
            box-shadow: 0 10px 30px rgba(2,6,23,0.6);
            border: 1px solid rgba(255,255,255,0.03);
        }

        header h1{
            margin:0 0 8px 0;
            font-size:20px;
            letter-spacing:0.2px;
        }
        header p{margin:0;color:var(--muted);font-size:13px}

        .form{
            display:flex;
            gap:12px;
            margin-top:16px;
            align-items:center;
        }

        input[type="text"], input[type="number"]{
            flex:1;
            min-width:0;
            padding:12px 14px;
            background:var(--glass);
            border:1px solid rgba(255,255,255,0.04);
            color:inherit;
            border-radius:10px;
            outline:none;
            transition:box-shadow .15s, transform .08s;
        }
        input:focus{
            box-shadow: 0 6px 18px rgba(124,58,237,0.12);
            transform:translateY(-1px);
            border-color: rgba(124,58,237,0.6);
        }

        button.primary{
            background:linear-gradient(90deg,var(--accent),#4f46e5);
            color:white;
            padding:10px 16px;
            border-radius:10px;
            border:none;
            cursor:pointer;
            font-weight:600;
            box-shadow: 0 8px 22px rgba(79,70,229,0.18);
            transition:transform .12s, opacity .12s;
        }
        button.primary:active{transform:translateY(1px)}
        button.primary[disabled]{opacity:.6; cursor:not-allowed}

        .hint{margin-top:10px;color:var(--muted);font-size:13px}

        /* Modal */
        .overlay{
            position:fixed;
            inset:0;
            background:rgba(2,6,23,0.6);
            display:none;
            align-items:center;
            justify-content:center;
            padding:20px;
            z-index:40;
            -webkit-backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(4px);
        }
        .overlay.open{display:flex; animation:fadeIn .14s ease-out;}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}

        .modal{
            width:100%;
            max-width:680px;
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border-radius:14px;
            padding:18px;
            border:1px solid rgba(255,255,255,0.04);
            box-shadow: 0 20px 60px rgba(2,6,23,0.7);
            color:#eaf2ff;
            max-height:80vh;
            overflow:auto;
        }

        .modal .modal-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:12px;
        }
        .modal h2{margin:0;font-size:16px}
        .modal .close{
            background:transparent;
            border:1px solid rgba(255,255,255,0.04);
            color:inherit;
            padding:6px 10px;
            border-radius:8px;
            cursor:pointer;
        }

        .messages{
            margin-top:14px;
            display:grid;
            gap:8px;
        }

        .msg{
            background:rgba(255,255,255,0.02);
            padding:10px 12px;
            border-radius:10px;
            border:1px solid rgba(255,255,255,0.02);
            font-weight:500;
            display:flex;
            align-items:center;
            gap:10px;
        }
        .msg--special{
            background:linear-gradient(90deg, rgba(124,58,237,0.12), rgba(79,70,229,0.06));
            border:1px solid rgba(124,58,237,0.18);
            color:#fff;
        }

        /* toast */
        .toast{
            position:fixed;
            right:20px;
            bottom:20px;
            background:var(--card);
            color:var(--muted);
            padding:10px 14px;
            border-radius:10px;
            border:1px solid rgba(255,255,255,0.03);
            box-shadow: 0 6px 20px rgba(2,6,23,0.45);
            display:none;
            z-index:60;
            min-width:220px;
        }
        .toast.show{display:block; animation:pop .22s ease-out}
        @keyframes pop{from{transform:translateY(6px);opacity:0}to{transform:none;opacity:1}}

        .toast.success{border-left:4px solid var(--success)}
        .toast.error{border-left:4px solid var(--danger); color:#ffd7d7}

        /* small responsive */
        @media (max-width:520px){
            .form{flex-direction:column}
            button.primary{width:100%}
        }
    </style>
</head>
<body>
    <div class="container" role="main">
        <header>
            <h1>Friendly Message Printer</h1>
            <p class="hint">Type a name and number, then press Print Messages. A popup will show the results.</p>
        </header>

        <div class="form" style="margin-top:18px;">
            <input id="nameInput" type="text" placeholder="Enter your name" value="">
            <input id="countInput" type="number" placeholder="How many times to print" min="1" value="3">
            <button class="primary" id="printBtn" onclick="printMessages()">Print Messages</button>
        </div>

        <p class="hint" style="margin-top:12px;">Tip: For large numbers (100+), a special message will be shown.</p>
    </div>

    <!-- Modal / Popup -->
    <div id="overlay" class="overlay" aria-hidden="true" onclick="closeModal(event)">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="modalTitle">Messages</h2>
                <div style="display:flex;gap:8px;align-items:center">
                    <button class="close" onclick="copyMessages()">Copy</button>
                    <button class="close" onclick="closeModal()">Close</button>
                </div>
            </div>
            <div id="messages" class="messages" style="margin-top:12px">
                <!-- messages injected here -->
            </div>
        </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
        // small helpers
        function showToast(text, type = '') {
            const t = document.getElementById('toast');
            t.className = 'toast' + (type ? ' ' + type : '');
            t.textContent = text;
            t.classList.add('show');
            clearTimeout(t._timeout);
            t._timeout = setTimeout(()=> t.classList.remove('show'), 3500);
        }

        function openModal() {
            const o = document.getElementById('overlay');
            o.classList.add('open');
            o.setAttribute('aria-hidden', 'false');
        }
        function closeModal(e){
            if (e && e.type === 'click' && e.target !== document.getElementById('overlay')) return;
            const o = document.getElementById('overlay');
            o.classList.remove('open');
            o.setAttribute('aria-hidden', 'true');
        }

        function copyMessages(){
            const el = document.getElementById('messages');
            const text = Array.from(el.querySelectorAll('.msg')).map(m => m.textContent.trim()).join('\\n');
            navigator.clipboard?.writeText(text).then(()=>{
                showToast('Copied to clipboard', 'success');
            }, ()=> showToast('Copy failed', 'error'));
        }

        function printMessages(){
            const name = document.getElementById('nameInput').value.trim() || 'Friend';
            const raw = document.getElementById('countInput').value;
            const howmany = Number(raw);

            const out = document.getElementById('messages');
            out.innerHTML = '';

            if (!Number.isFinite(howmany) || howmany <= 0) {
                showToast('Please enter a positive number', 'error');
                return;
            }

            // guard against accidental huge numbers
            const MAX = 500;
            if (howmany > MAX) {
                showToast(`Limiting to ${MAX} messages for performance`);
            }
            const count = Math.min(howmany, MAX);

            if (howmany >= 100) {
                const special = document.createElement('div');
                special.className = 'msg msg--special';
                special.textContent = `You really love yourself, ${name} â€” smile! ðŸŽ‰`;
                out.appendChild(special);

                const info = document.createElement('div');
                info.className = 'msg';
                info.textContent = `Requested ${howmany} times â€” showing a single friendly reminder.`;
                out.appendChild(info);
            } else {
                for (let i = 0; i < count; i++) {
                    const d = document.createElement('div');
                    d.className = 'msg';
                    d.textContent = `${i+1}. Hello ${name}!`;
                    out.appendChild(d);
                }
            }

            openModal();
        }

        // allow Enter key to trigger print when focused on inputs
        document.getElementById('countInput').addEventListener('keydown', (e)=> {
            if (e.key === 'Enter') printMessages();
        });
        document.getElementById('nameInput').addEventListener('keydown', (e)=> {
            if (e.key === 'Enter') printMessages();
        });

        // preserve last used values (session)
                const nameElement = document.getElementById('nameInput');
                try {
                    const sName = sessionStorage.getItem('pp_name');
                    const sCount = sessionStorage.getItem('pp_count');
                    if (sName) nameElement.value = sName;
                    if (sCount) document.getElementById('countInput').value = sCount;
                } catch(e){}
        
                window.addEventListener('beforeunload', ()=> {
                    try {
                        sessionStorage.setItem('pp_name', nameElement.value);
                        sessionStorage.setItem('pp_count', document.getElementById('countInput').value);
                    } catch(e) {
                        console.error('Failed to save to sessionStorage', e);
                    }
                });
    </script>
</body>
</html>


